
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Automating Installation of Netatalk 3.0.X with Ansible - Random IT Notes</title>
  <meta name="author" content="Gregory Shulov">

  
  <meta name="description" content="Recently I wanted to test latest version of netatalk 3.0 on my Ubuntu Box.
Unfortunately the latest binary version available for Ubuntu 12.04 is &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://GR360RY.github.io/blog/2013/11/16/automating-installation-of-netatalk-3-dot-0-x-with-ansible">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Random IT Notes" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Random IT Notes</a></h1>
  
    <h2>As stated above.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:GR360RY.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Automating Installation of Netatalk 3.0.X With Ansible</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-16T21:20:00+02:00" pubdate data-updated="true">Nov 16<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Recently I wanted to test latest version of netatalk 3.0 on my Ubuntu Box.
Unfortunately the latest binary version available for Ubuntu 12.04 is netatalk 2.2.1 from netatalk 2.X branch.
As a result I came to do a little Ansible playbook that installs Netatalk 3.0.6 automatically.
This article shows how to use Ansible playbook to compile, install and configure Netatalk on your machine or test latest version of Netatalk using Vagrant and VirtualBox for different Linux Distributions.</p>

<h3>Installing Requirements and Getting the source</h3>

<p>We need new version of Ansible to perform the installation. Instructions are available below:</p>

<ol>
<li> <a href="http://www.ansibleworks.com/docs/intro_installation.html#latest-releases-via-apt-ubuntu">Ubuntu Instructions</a></li>
<li> <a href="http://www.ansibleworks.com/docs/intro_installation.html#latest-release-via-yum">CentOS/RedHat and Fedora Instructions</a></li>
<li> <a href="http://www.codingspaces.com/2013/07/installing-ansible-on-os-x-via-homebrew.html">For Mac OSX just use &ldquo;brew&rdquo;</a></li>
</ol>


<p>Get netatalk-ansible playbook from github:</p>

<pre><code>foo@myhost:~$ git clone git@github.com:GR360RY/netatalk-ansible.git
foo@myhost:~$ cd netatalk-ansible
</code></pre>

<h3>Configuring Asible Environment</h3>

<p>If you just want to test the setup with Vagrant &ndash; jump to <a href="">Vagrant</a> section.</p>

<p>To be able to install and configure netatalk we will need to have ssh access to the target Linux system ( &ldquo;localhost&rdquo; in case we are doing self provisioning ). This playbook implies that &ldquo;ssh user&rdquo; will also be the owner of the AFP shares. In addition the ssh user need to have sudo privileges on the target system, as some task will require root privileges.</p>

<p>For testing purposes passwordless sudo access can be configured if not available:
Add the below line to /etc/sudoers</p>

<pre><code>your_username    ALL=(ALL) NOPASSWD:ALL
</code></pre>

<p>Add your target system ip ( 127.0.0.1 for self provisioning ) to &lsquo;ansible_hosts&rsquo; as folling:</p>

<pre><code>foo@myhost:~/netatalk-ansible $ cat ansible_hosts
# List of hosts to configure netatalk on
# 10.0.0.1
# 192.168.0.101
# ...
10.0.0.3
</code></pre>

<h3></h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="nn">---</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">hosts</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">all</span>
</span><span class='line'>
</span><span class='line'>  <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">vagrant</span>      <span class="c1"># User to access your machine over ssh that has sudo permittions</span>
</span><span class='line'>  <span class="l-Scalar-Plain">sudo</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">yes</span>
</span></code></pre></td></tr></table></div></figure>



</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Gregory Shulov</span></span>

      








  


<time datetime="2013-11-16T21:20:00+02:00" pubdate data-updated="true">Nov 16<span>th</span>, 2013</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://GR360RY.github.io/blog/2013/11/16/automating-installation-of-netatalk-3-dot-0-x-with-ansible/" data-via="" data-counturl="http://GR360RY.github.io/blog/2013/11/16/automating-installation-of-netatalk-3-dot-0-x-with-ansible/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/11/16/automating-installation-of-netatalk-3-dot-0-x-with-ansible/">Automating Installation of Netatalk 3.0.X With Ansible</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Gregory Shulov -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
